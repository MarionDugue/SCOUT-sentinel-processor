workflow:
  find_ids: 1
  download: 1
  skip_existing: 1
  pre_process: 1
  subset: 1  # New toggle for subsetting

  
input:
  aoi_path: "../kml/Eitelsried_Fields_kml" #Directory of all indidivual fields
  aoi_path_total: "../kml/Eitelsried_Fields_total.kml" #KML file of the union of all fields
  start_date: "2025-04-01"
  end_date: "2025-05-31"

output:
  base_dir: "../data"
  s1_csv_pattern: "IDs_S1_{satellite}_{mode}_{level}_{polarisation}_{start}_{end}_orbit{rel_orbit}.csv"

sentinel2:
  surface_reflectance: "COPERNICUS/S2_SR_HARMONIZED"
  cloud_probability: "COPERNICUS/S2_CLOUD_PROBABILITY"
  cloud_threshold: 15

sentinel1:
  satellite: "BOTH"             # Options: "S1A", "S1B", "BOTH"
  mode: "IW"
  level: "SLC"
  polarisation: "VV+VH"         # Options: "VV", "HH", "VV+VH", "HH+HV"
  collection: "SENTINEL-1"      # Collection name for S1 data
  #rel_orbit: 14                # Optional: Filter by relative orbit number

  # SNAP processing configuration
  snap:
    gpt_path: "/home/mdugue/esa-snap/bin/gpt"  # Path to SNAP's gpt executable
    dem_path: "/home/mdugue/cds/working/Marion/AGRI4SAR/DEM/srtm_germany_dtm.tif"  # Path to DEM suitable for AOI
    graphs:
      - name: "split_orb_complexCal_deb_writeBEAM"
        path: "sentinel1/snap_graphs/split_orb_complexCal_deb_writeBEAM.xml"
        output_suffix: "_split_Orb.dim"
      - name: "readBEAM_spkl_decomp_TC_WriteTIFF"
        path: "sentinel1/snap_graphs/readBEAM_spkl_decomp_TC_WriteTIFF.xml"
        output_suffix: "_poldecomp_final.dim"
      #- name: "split_Orb_Cal_deb_ML_dB_TC_10m_IA"
      #  path: "sentinel1/snap_graphs/split_Orb_Cal_deb_ML_dB_TC_10m_IA.xml"
      #  output_suffix: "_finaldB.dim"
    output_dir: "../data/processed"  # Directory for processed outputs

  download_url: "https://zipper.dataspace.copernicus.eu/odata/v1/Products({})/$value"
  download_dir: "/home/mdugue/cds/working/Marion/AGRI4SAR/AgriROSE-L_2025/refactored_code/working_SLCs" #for SLCs scenes, the download directory can be on a separate path/server

  odata:
    base_url: "https://catalogue.dataspace.copernicus.eu/odata/v1/Products"
    orderby: "ContentDate/Start"
    top: 1000


  polarisation_mapping:
    "1SDV": "VV+VH"
    "1SDH": "HH+HV"
    "1SSV": "VV"
    "1SSH": "HH"

  product_formatting:
    remove_suffix: ".SAFE"
    default_csv_name: "s1_ids.csv"

geometry:
  empty_wkt: "MULTIPOLYGON EMPTY"

copernicus_credentials:
  username: mdugue@student.ethz.ch
  password: ravpex-gUpwod-9fywma

pre-processing:
  snap_graph: 

scripts:
  download_script: "sentinel1/s1_download_from_csv.py"
  base_dir: ".."  # Base directory relative to config file

logging:
  log_dir: "data/logs"
  error_log: "error_log.txt"
  process_log: "process_log.txt"

# Add new subsetting section
subsetting:
  kml_dir: "/home/mdugue/cds/working/Marion/AGRI4SAR/AgriROSE-L_2025/kml/Eitelsried_Fields_kml"
  output_dir: "/home/mdugue/cds/working/Marion/AGRI4SAR/AgriROSE-L_2025/S1_april_2025_eitelsried/subsets"
  stats_csv: "/home/mdugue/cds/working/Marion/AGRI4SAR/AgriROSE-L_2025/stats_s1_backscatter.csv"
  scripts:
    subset_script: "scripts/subset_raster.py"
    stats_script: "scripts/extract_stats.py"




  
